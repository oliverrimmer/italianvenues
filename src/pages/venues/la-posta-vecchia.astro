---
import BaseLayout from '../../layouts/BaseLayout.astro';
import venueData from '../../data/venues/la-posta-vecchia.json';

const { name, city, region, maxGuests, exclusiveUse, startingPriceEur, heroImage, intro, usps, gallery, spaces, locationInfo, faqs, contact } = venueData;
---

<BaseLayout 
  title={`${name} — ${city}, ${region} | ItalianVenues`}
  description={intro}
>
  <!-- HERO SECTION -->
  <section class="relative h-screen bg-black">
    <img
      src={heroImage}
      alt={name}
      class="absolute inset-0 w-full h-full object-cover opacity-70"
    />
    <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-black/70"></div>
    
    <div class="relative z-10 h-full flex flex-col items-center justify-center px-6 text-center">
      <p class="text-[#a78656] text-sm md:text-base font-medium tracking-wider uppercase mb-4">{city}, {region}</p>
      <h1 class="heading-h1 text-white mb-6">
        {name}
      </h1>
      <p class="text-white/90 text-lg md:text-xl max-w-2xl mb-8">
        {intro.substring(0, 120)}...
      </p>
      <a href="#contact" class="inline-flex items-center px-8 py-4 border-2 border-[#a78656] text-[#a78656] font-medium hover:bg-[#a78656] hover:text-white transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-[#a78656] rounded">
        Enquire Now
      </a>
    </div>
  </section>

  <!-- OVERVIEW SECTION -->
  <section class="bg-white py-20 md:py-28">
    <div class="container mx-auto px-6 max-w-6xl">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16">
        <!-- Intro Text -->
        <div>
          <h2 class="heading-h2 font-semibold mb-6">About {name}</h2>
          <p class="text-lg leading-relaxed text-zinc-700 mb-6">{intro}</p>
          <div class="flex flex-wrap gap-4">
            <div class="px-4 py-2 bg-zinc-100 rounded-lg">
              <p class="text-sm text-zinc-600">Max Guests</p>
              <p class="text-xl font-semibold text-black">{maxGuests}</p>
            </div>
            {exclusiveUse && (
              <div class="px-4 py-2 bg-zinc-100 rounded-lg">
                <p class="text-sm text-zinc-600">Exclusive Use</p>
                <p class="text-xl font-semibold text-black">Yes</p>
              </div>
            )}
            <div class="px-4 py-2 bg-zinc-100 rounded-lg">
              <p class="text-sm text-zinc-600">Starting From</p>
              <p class="text-xl font-semibold text-black">€{startingPriceEur.toLocaleString()}</p>
            </div>
          </div>
        </div>

        <!-- USP Cards -->
        <div>
          <h3 class="heading-h3 font-semibold mb-6">Key Features</h3>
          <ul class="space-y-4">
            {usps.map((usp) => (
              <li class="flex items-start gap-3">
                <svg class="w-6 h-6 text-[#a78656] flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7"></path>
                </svg>
                <span class="text-lg text-zinc-700">{usp}</span>
              </li>
            ))}
          </ul>
        </div>
      </div>
    </div>
  </section>

  <!-- GALLERY SECTION -->
  <section class="bg-zinc-50 py-20 md:py-28">
    <div class="container mx-auto px-6 max-w-7xl">
      <h2 class="heading-h2 font-semibold mb-12 text-center">Gallery</h2>
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
        {gallery.map((image, index) => (
          <a href={image} target="_blank" class="group block relative aspect-[4/3] rounded-xl overflow-hidden">
            <img 
              src={image} 
              alt={`${name} - Image ${index + 1}`}
              class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110"
            />
            <div class="absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-200"></div>
          </a>
        ))}
      </div>
    </div>
  </section>

  <!-- SPACES & CAPACITY SECTION -->
  <section class="bg-white py-20 md:py-28">
    <div class="container mx-auto px-6 max-w-5xl">
      <h2 class="heading-h2 font-semibold mb-12 text-center">Spaces & Capacity</h2>
      <div class="overflow-x-auto">
        <table class="w-full border border-zinc-200 rounded-lg">
          <thead class="bg-zinc-100">
            <tr>
              <th class="px-6 py-4 text-left text-sm font-semibold text-zinc-900">Space</th>
              <th class="px-6 py-4 text-left text-sm font-semibold text-zinc-900">Capacity</th>
            </tr>
          </thead>
          <tbody>
            {spaces.map((space, index) => (
              <tr class={index % 2 === 0 ? 'bg-white' : 'bg-zinc-50'}>
                <td class="px-6 py-4 text-zinc-800 font-medium">{space.name}</td>
                <td class="px-6 py-4 text-zinc-600">{space.capacity}</td>
              </tr>
            ))}
          </tbody>
        </table>
      </div>
    </div>
  </section>

  <!-- LOCATION SECTION -->
  <section class="bg-zinc-50 py-20 md:py-28">
    <div class="container mx-auto px-6 max-w-6xl">
      <h2 class="heading-h2 font-semibold mb-12 text-center">Location</h2>
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
        <!-- Map -->
        <div class="rounded-xl overflow-hidden shadow-lg">
          <iframe
            src={locationInfo.mapEmbed}
            width="100%"
            height="400"
            style="border:0;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            title={`Map of ${name}`}
          ></iframe>
        </div>

        <!-- Distance Info -->
        <div>
          <h3 class="heading-h3 font-semibold mb-6">Getting There</h3>
          <p class="text-zinc-700 mb-6">{locationInfo.address}</p>
          <div class="space-y-4">
            {Object.entries(locationInfo.distances).map(([location, distance]) => (
              <div class="flex justify-between items-center py-3 border-b border-zinc-200">
                <span class="text-zinc-800 font-medium">{location}</span>
                <span class="text-zinc-600">{distance}</span>
              </div>
            ))}
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- FAQs SECTION -->
  <section class="bg-white py-20 md:py-28">
    <div class="container mx-auto px-6 max-w-4xl">
      <h2 class="heading-h2 font-semibold mb-12 text-center">Frequently Asked Questions</h2>
      <div class="space-y-4">
        {faqs.map((faq, index) => (
          <details class="group border border-zinc-200 rounded-lg">
            <summary class="flex justify-between items-center cursor-pointer px-6 py-5 hover:bg-zinc-50 transition-colors">
              <h3 class="text-lg font-medium text-zinc-900 pr-8">{faq.q}</h3>
              <svg class="w-5 h-5 text-zinc-500 transition-transform group-open:rotate-180" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path>
              </svg>
            </summary>
            <div class="px-6 pb-5 text-zinc-700 leading-relaxed">
              {faq.a}
            </div>
          </details>
        ))}
      </div>
    </div>
  </section>

  <!-- CONTACT SECTION -->
  <section id="contact" class="bg-[hsl(0,0%,3%)] text-white py-20 md:py-28">
    <div class="container mx-auto px-6 max-w-2xl">
      <h2 class="heading-h2 font-semibold mb-6 text-center">{contact.cta}</h2>
      <p class="text-center text-zinc-400 mb-12">Fill out the form below and we'll respond within 24 hours.</p>
      
      <form class="space-y-6">
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="name" class="block text-sm font-medium text-zinc-300 mb-2">Full Name *</label>
            <input
              type="text"
              id="name"
              name="name"
              required
              class="w-full px-4 py-3 bg-white/5 border border-zinc-700 rounded-lg text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-[#a78656] focus:border-transparent"
              placeholder="John Smith"
            />
          </div>
          <div>
            <label for="email" class="block text-sm font-medium text-zinc-300 mb-2">Email *</label>
            <input
              type="email"
              id="email"
              name="email"
              required
              class="w-full px-4 py-3 bg-white/5 border border-zinc-700 rounded-lg text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-[#a78656] focus:border-transparent"
              placeholder="john@example.com"
            />
          </div>
        </div>

        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <div>
            <label for="guests" class="block text-sm font-medium text-zinc-300 mb-2">Number of Guests</label>
            <input
              type="number"
              id="guests"
              name="guests"
              class="w-full px-4 py-3 bg-white/5 border border-zinc-700 rounded-lg text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-[#a78656] focus:border-transparent"
              placeholder="100"
            />
          </div>
          <div>
            <label for="date" class="block text-sm font-medium text-zinc-300 mb-2">Preferred Date</label>
            <input
              type="date"
              id="date"
              name="date"
              class="w-full px-4 py-3 bg-white/5 border border-zinc-700 rounded-lg text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-[#a78656] focus:border-transparent"
            />
          </div>
        </div>

        <div>
          <label for="message" class="block text-sm font-medium text-zinc-300 mb-2">Message *</label>
          <textarea
            id="message"
            name="message"
            rows="6"
            required
            class="w-full px-4 py-3 bg-white/5 border border-zinc-700 rounded-lg text-white placeholder:text-zinc-500 focus:outline-none focus:ring-2 focus:ring-[#a78656] focus:border-transparent resize-none"
            placeholder="Tell us about your event..."
          ></textarea>
        </div>

        <button
          type="submit"
          class="w-full px-8 py-4 bg-[#a78656] text-white font-semibold rounded-lg hover:bg-[#8f6d47] transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-[#a78656] focus:ring-offset-2 focus:ring-offset-[hsl(0,0%,3%)]"
        >
          Send Enquiry
        </button>
      </form>
    </div>
  </section>
</BaseLayout>

<style>
  /* Smooth accordion animation */
  details summary::-webkit-details-marker {
    display: none;
  }
  
  details[open] summary {
    border-bottom: 1px solid rgb(228, 228, 231);
  }

  /* Smooth transitions */
  * {
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
  }
</style>

